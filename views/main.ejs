<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/bootstrap.min.css" />

    <title>RecipeBook</title>
    <script defer src="./js/bootstrap.min.js"></script>
  </head>

  <body class="bg-light">
    <script defer>
      var err = '<%= locals.error==="" ? "" : locals.error %>';
      if (err !== "") {
        alert(err);
      }
    </script>
    <%- include('./partials/navbar.ejs') %> <% if(loggedin===false){ %> <%-
    include('./partials/auth.ejs') %> <% } else { %> <%-
    include('./partials/addmodal.ejs') %>
    <div class="container my-5">
      <div
        class="row row-cols-1 row-cols-sm-2 row-cols-md-4"
        id="recipe_container"
      >
        <script>
          const recipe_data = <%- JSON.stringify(recipes) %>;
          const recipe_container= document.getElementById('recipe_container');
          recipe_data.map((elem)=>{
              recipe_container.innerHTML+=`<div class="col d-flex align-items-stretch">
                  <div class="card border border-primary mb-3" style="width: 100%;">
                  <img src="${elem.image.isurl?elem.image.url:elem.image.url}" class="card-img-top" style="width:100%; height:10rem; object-fit:cover;" alt="...">
                  <div class="card-body">
                  <h5 class="card-title text-primary">${elem.title}</h5>
                  <p class="card-text">${elem.desc}</p>
                  </div>
                  <a href="/recipe/${elem._id}" style="border-radius:0;" class="btn btn-primary rounded-bottom " >View</a>
                  </div></div>`;
          })
        </script>
      </div>
    </div>
    <% } %>
  </body>
</html>
